turns out libraries already exist to do this :(
